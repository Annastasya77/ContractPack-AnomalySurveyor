// Contract for the Kerbin monoliths.
//   Author: nightingale

CONTRACT_TYPE
{
    name = AS_Kerbin_Monolith
    group = AnomalySurveyor

    title = Investigate magnetic anomaly on Kerbin.
    description = There seems to be reports of some strange magnetic anomalies around the planet.  Head on over and see if you can find anything.
    synopsis = Visit the locations of some of the magnetic anomalies.
    completedMessage = The monoliths seem to have activated and are emitting signals to the Mun and Minmus.

    // Indicates a contract where SCANsat multipliers should be applied
    tag = SCANsat

    // Level 2 prestige
    prestige = Significant

    targetBody = Kerbin

    // Always offered by the Anomaly Surveyor Group
    agent = Anomaly Surveyor Group

    // Can only do this contract once
    maxCompletions = 1

    // Contract rewards
    rewardFunds = 100000.0
    rewardScience = 40.0
    rewardReputation = 20.0

    PARAMETER
    {
        name = WP0
        type = All
        title = Visit the first magnetic anomaly (TMA-0)

        PARAMETER
        {
            name = VesselIsType
            type = VesselIsType

            vesselType = EVA
        }

        PARAMETER
        {
            name = VisitWaypoint
            type = VisitWaypoint

            index = 0
            distance = 15
        }
    }

    PARAMETER
    {
        type = AtLeast

        count = 2
        title = Visit two more monoliths

        PARAMETER
        {
            name = WP1
            type = All
            title = Visit TMA-1

            rewardFunds = 40000.0

            PARAMETER
            {
                name = VesselIsType
                type = VesselIsType

                vesselType = EVA
            }

            PARAMETER
            {
                name = VisitWaypoint
                type = VisitWaypoint

                index = 1
                distance = 50
            }
        }

        PARAMETER
        {
            name = WP2
            type = All
            title = Visit TMA-2

            rewardFunds = 60000.0

            PARAMETER
            {
                name = VesselIsType
                type = VesselIsType

                vesselType = EVA
            }

            PARAMETER
            {
                name = VisitWaypoint
                type = VisitWaypoint

                index = 2
                distance = 15
            }
        }

        PARAMETER
        {
            name = WP3
            type = All
            title = Visit TMA-3

            rewardFunds = 80000.0

            PARAMETER
            {
                name = VesselIsType
                type = VesselIsType

                vesselType = EVA
            }

            PARAMETER
            {
                name = VisitWaypoint
                type = VisitWaypoint

                index = 3
                distance = 35
            }
        }

        PARAMETER
        {
            name = WP4
            type = All
            title = Visit TMA-4

            rewardFunds = 100000.0

            PARAMETER
            {
                name = VesselIsType
                type = VesselIsType

                vesselType = EVA
            }

            PARAMETER
            {
                name = VisitWaypoint
                type = VisitWaypoint

                index = 4
                distance = 35
            }
        }
    }

    BEHAVIOUR
    {
        name = WaypointGenerator
        type = WaypointGenerator

        WAYPOINT
        {
            // The name of the waypoint - displayed on the marker
            name = TMA-0
            icon = ContractPacks/AnomalySurveyor/Icons/monolith

            // The location
            latitude = 0.10227297919058
            longitude = -74.5684338987643
            altitude = 0.0
        }

        PQS_CITY
        {
            // The name of the waypoint - displayed on the marker
            name = TMA-1
            icon = ContractPacks/AnomalySurveyor/Icons/monolith

            // The location name
            pqsCity = Monolith01
        }

        WAYPOINT
        {
            // The name of the waypoint - displayed on the marker
            name = TMA-2
            icon = ContractPacks/AnomalySurveyor/Icons/monolith

            // The location
            latitude = 20.6708959294282 
            longitude = 213.503158424511
            altitude = -1.32574519433547
        }

        WAYPOINT
        {
            // The name of the waypoint - displayed on the marker
            name = TMA-4
            icon = ContractPacks/AnomalySurveyor/Icons/monolith

            // The location
            latitude = 35.5705099080007
            longitude = -74.9770427670473
            altitude = 0.147795451572165
        }

        PQS_CITY
        {
            // The name of the waypoint - displayed on the marker
            name = TMA-3
            icon = ContractPacks/AnomalySurveyor/Icons/monolith

            // The location name
            pqsCity = Monolith02
        }
    }

    BEHAVIOUR
    {
        type = DialogBox

        DIALOG_BOX
        {
            title = TMA-0

            condition = PARAMETER_COMPLETED
            parameter = WP0

            INSTRUCTOR
            {
                name = Instructor_Gene
                animation = idle_wonder
            }

            TEXT
            {
                text = Imagine, right in our backyard and we never saw it.  Maybe if we had some windows in the administration building.
            }
        }

        DIALOG_BOX
        {
            title = TMA-1

            condition = PARAMETER_COMPLETED
            parameter = WP1

            INSTRUCTOR
            {
                name = Instructor_Gene
                animation = false_disagreeA
            }

            TEXT
            {
                text = This is the spot...  but no monolith.  Maybe someone buried it?  Hopefully we'll have more luck at the other locations.
            }
        }

        DIALOG_BOX
        {
            title = TMA-2

            condition = PARAMETER_COMPLETED
            parameter = WP2

            INSTRUCTOR
            {
                name = Instructor_Gene
                animation = idle_lookAround
            }

            TEXT
            {
                text = Looks like an abandonded launch facility.  Were there other Kerbals that made it into space before us?
            }
        }

        DIALOG_BOX
        {
            title = TMA-3

            condition = PARAMETER_COMPLETED
            parameter = WP3

            KERBAL
            {
            }

            TEXT
            {
                text = This looks like a great place to hide a super secret base!
            }
        }

        DIALOG_BOX
        {
            title = TMA-4

            condition = PARAMETER_COMPLETED
            parameter = WP4

            KERBAL
            {
            }

            TEXT
            {
                text = It's really cold up here, even in the EVA suit...  can I go home now?
            }
        }
    }

    REQUIREMENT
    {
        name = Orbit
        type = Orbit
    }

    REQUIREMENT
    {
        name = PartUnlocked
        type = PartUnlocked

        part = JetEngine
    }

    REQUIREMENT:NEEDS[SCANsat]
    {
        name = WP0
        type = SCANsatLocationCoverage

        latitude = 0.102331064775746
        longitude = 285.431593173861
    }

    REQUIREMENT:NEEDS[SCANsat]
    {
        name = WP1
        type = SCANsatLocationCoverage

        pqsCity = Monolith01
    }

    REQUIREMENT:NEEDS[SCANsat]
    {
        name = WP2
        type = SCANsatLocationCoverage

        latitude = 20.6709
        longitude = -146.4968
    }

    REQUIREMENT:NEEDS[SCANsat]
    {
        name = WP3
        type = SCANsatLocationCoverage

        pqsCity = Monolith02
    }

    REQUIREMENT:NEEDS[SCANsat]
    {
        name = WP4
        type = SCANsatLocationCoverage

        latitude = 35.5705099080007
        longitude = -74.9770427670473
    }
}


@CONTRACT_TYPE[AS_Kerbin_Monolith]:NEEDS[SCANsat]
{
    @description = Our scans have detected some interesting magnetic signals all over the planet.  Head on over and see if you can find anything.
}
